<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>웹서버 자동 설치 도구 — 매뉴얼 정렬 버전</title>
    <link rel="stylesheet" href="css/app.css" />
</head>
<body>
<div class="container">
    <div class="header">
        <h1> 웹서버 자동 설치 도구</h1>
    </div>

    <div class="progress-container">
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <div class="progress-text" id="progressText">시작 대기 중... (0/8)</div>
    </div>

    <div class="main-content">
        <div class="sidebar">
            <ul class="step-list" id="stepList">
                <li class="step-item active" data-step="0">
                    <div class="step-icon">1</div>
                    <div>
                        <div><strong>사전 점검/연결</strong></div>
                        <small>SSH, 디스크/시간 확인</small>
                    </div>
                </li>
                <li class="step-item" data-step="1">
                    <div class="step-icon">2</div>
                    <div>
                        <div><strong>WAS 패키지</strong></div>
                        <small>업로드/해제 & 필수패키지</small>
                    </div>
                </li>
                <li class="step-item" data-step="2">
                    <div class="step-icon">3</div>
                    <div>
                        <div><strong>Tomcat/JDK</strong></div>
                        <small>/app 배치 & 프로필</small>
                    </div>
                </li>
                <li class="step-item" data-step="3">
                    <div class="step-icon">4</div>
                    <div>
                        <div><strong>Nginx/커널</strong></div>
                        <small>conf 설정 & sysctl</small>
                    </div>
                </li>
                <li class="step-item" data-step="4">
                    <div class="step-icon">5</div>
                    <div>
                        <div><strong>소스 & 설정</strong></div>
                        <small>FR/BE 업로드, yml 수정</small>
                    </div>
                </li>
                <li class="step-item" data-step="5">
                    <div class="step-icon">6</div>
                    <div>
                        <div><strong>방화벽/서비스</strong></div>
                        <small>UFW, SELinux, systemd</small>
                    </div>
                </li>
                <li class="step-item" data-step="6">
                    <div class="step-icon">7</div>
                    <div>
                        <div><strong>DB & Redis</strong></div>
                        <small>설치/초기화/권한</small>
                    </div>
                </li>
                <li class="step-item" data-step="7">
                    <div class="step-icon">8</div>
                    <div>
                        <div><strong>기동/에이전트/검증</strong></div>
                        <small>서비스 시작 & 헬스체크</small>
                    </div>
                </li>
            </ul>
        </div>

        <div class="content-area">
            <!-- Step 0 -->
            <div class="step-content active" data-step="0">
                <h2 class="step-title">사전 점검 / SSH 연결</h2>
                <div class="connection-status">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusText">연결되지 않음</span>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px;">
                    <div class="field">
                        <label><b>서버 IP 주소</b></label>
                        <input class="input" id="serverIP" placeholder="192.168.11.102" value="192.168.11.102">
                    </div>
                    <div class="field">
                        <label><b>사용자명</b></label>
                        <input class="input" id="username" placeholder="ubuntu" value="ubuntu">
                    </div>
                    <!-- [Step 0] 사전 점검 / SSH 연결 - IP/사용자 아래에 비밀번호 필드 추가 -->
                    <div class="field">
                        <label><b>비밀번호</b></label>
                        <input class="input" id="password" type="password" placeholder="비밀번호">
                    </div>
                </div>
                <!-- onclick 제거, next 버튼은 비활성 -->
                <button class="action-button" id="btnPrecheck">연결 & 사전 점검</button>
                <button class="action-button" id="nextBtn0" disabled>다음 단계</button>
            </div>

            <!-- Step 1 -->
            <div class="step-content" data-step="1">
                <h2 class="step-title">WAS 패키지 업로드/해제 & 필수 패키지</h2>
                <button class="action-button" id="btnWAS" disabled>WAS 구성 실행</button>
                <button class="action-button" id="nextBtn1" disabled>다음 단계</button>
            </div>



            <!-- Step 2 -->
            <div class="step-content" data-step="2">
                <h2 class="step-title">Tomcat/JDK 구성</h2>
                <button class="action-button" id="btnTomcat" disabled>Tomcat/JDK 설정</button>
                <button class="action-button" id="nextBtn2" disabled>다음 단계</button>
            </div>
            <!-- [Step 2] WAS 패키지 - 파일 선택 필드 추가 -->
            <div style="margin:12px 0;">
                <input type="file" id="wasFile" accept=".tar,.tar.gz,.tgz,.zip"/>
            </div>

            <!-- Step 3 -->
            <div class="step-content" data-step="3">
                <h2 class="step-title">Nginx 설정 & 커널 튜닝</h2>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px;">
                    <div class="field">
                        <label><b>웹 포트</b></label>
                        <input class="input" id="webPort" placeholder="40000" value="40000">
                    </div>
                    <div class="field">
                        <label><b>도메인(선택)</b></label>
                        <input class="input" id="domain" placeholder="example.com">
                    </div>
                </div>
                <button class="action-button" id="btnNginx" disabled>Nginx/Kernel 적용</button>
                <button class="action-button" id="nextBtn3" disabled>다음 단계</button>
            </div>

            <!-- Step 4 -->
            <div class="step-content" data-step="4">
                <h2 class="step-title">소스 업로드 & Back-End 설정</h2>
                <button class="action-button" id="btnUpload" disabled>소스 업로드 & 설정</button>
                <button class="action-button" id="nextBtn4" disabled>다음 단계</button>
            </div>

            <!-- Step 5 -->
            <div class="step-content" data-step="5">
                <h2 class="step-title">방화벽/SELinux/서비스 등록</h2>
                <button class="action-button" id="btnSecurity" disabled>보안/서비스 설정</button>
                <button class="action-button" id="nextBtn5" disabled>다음 단계</button>
            </div>

            <!-- Step 6 -->
            <div class="step-content" data-step="6">
                <h2 class="step-title">DB & Redis 설치/초기화/권한</h2>
                <button class="action-button" id="btnDB" disabled>DB & Redis 실행</button>
                <button class="action-button" id="nextBtn6" disabled>다음 단계</button>
            </div>

            <!-- Step 7 -->
            <div class="step-content" data-step="7">
                <h2 class="step-title">서비스 기동 / 에이전트 설치 / 검증</h2>
                <button class="action-button" id="btnStart" disabled>기동 & 검증</button>
                <button class="action-button" id="finishBtn" disabled>설치 완료</button>
            </div>

            <!-- 로그창: 더미 텍스트 제거 (빈 상태 유지) -->
            <div class="log-container" id="logContainer"></div>
        </div>
    </div>
</div>

<script src="js/app.js"></script>
</body>
</html>
